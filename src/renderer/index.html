<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Docufier</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <!-- App Header -->
  <header class="app-header">
    <div class="header-content">
      <h1 class="app-title">Docufier</h1>
      <nav class="header-nav">
        <button id="close-doc-btn" class="btn btn-icon" title="Close Document" style="display: none;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        <button id="export-btn" class="btn btn-primary">Export as .docf</button>
        <button id="settings-btn" class="btn btn-icon" title="Settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m15.364 6.364l-4.243-4.243m-4.242 0L5.636 17.364m12.728 0l-4.243-4.243m-4.242 0L5.636 6.636"></path>
          </svg>
        </button>
      </nav>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="app-main">
    <!-- Welcome Screen (default) -->
    <div id="welcome-screen" class="screen active">
      <div class="welcome-content">
        <div class="welcome-icon">
          <svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="16" y="20" width="64" height="72" rx="4" fill="url(#gradient)" opacity="0.9"/>
            <rect x="20" y="28" width="56" height="4" rx="2" fill="currentColor" opacity="0.6"/>
            <rect x="20" y="38" width="48" height="4" rx="2" fill="currentColor" opacity="0.4"/>
            <rect x="20" y="48" width="52" height="4" rx="2" fill="currentColor" opacity="0.4"/>
            <path d="M16 20L28 8H72C74.2091 8 76 9.79086 76 12V80C76 82.2091 74.2091 84 72 84H24C21.7909 84 20 82.2091 20 80V20H16Z" fill="url(#gradient)" opacity="0.7"/>
            <defs>
              <linearGradient id="gradient" x1="0" y1="0" x2="96" y2="96" gradientUnits="userSpaceOnUse">
                <stop offset="0%" stop-color="#667eea"/>
                <stop offset="100%" stop-color="#764ba2"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <h2>Welcome to Docufier</h2>
        <p>Open a .docf file or export your documentation folder</p>
        <div class="welcome-actions">
          <button id="open-file-btn" class="btn btn-large btn-primary">Open .docf File</button>
          <button id="export-welcome-btn" class="btn btn-large btn-secondary">Export Folder as .docf</button>
        </div>
      </div>
    </div>

    <!-- Viewer Screen -->
    <div id="viewer-screen" class="screen">
      <div class="viewer-container">
        <aside id="sidebar" class="sidebar"></aside>
        <div class="viewer-content">
          <div id="docsify-container"></div>
        </div>
      </div>
    </div>

    <!-- Export Wizard Screen -->
    <div id="export-screen" class="screen">
      <div class="wizard-container">
        <div class="wizard-header">
          <h2>Export as .docf</h2>
          <button id="close-export-btn" class="btn btn-icon">✕</button>
        </div>
        <div class="wizard-content" id="export-wizard-content">
          <!-- Wizard steps will be inserted here -->
        </div>
      </div>
    </div>

    <!-- Settings Panel -->
    <div id="settings-panel" class="settings-panel">
      <div class="settings-header">
        <h3>Settings</h3>
        <button id="close-settings-btn" class="btn btn-icon">✕</button>
      </div>
      <div class="settings-content">
        <div class="setting-group">
          <label for="theme-select">Theme</label>
          <select id="theme-select" class="setting-control">
            <option value="system">System</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
        </div>
        <div class="setting-group">
          <label for="font-size-select">Font Size</label>
          <select id="font-size-select" class="setting-control">
            <option value="small">Small</option>
            <option value="medium" selected>Medium</option>
            <option value="large">Large</option>
            <option value="xlarge">Extra Large</option>
          </select>
        </div>
        <div class="setting-group">
          <label for="line-spacing-select">Line Spacing</label>
          <select id="line-spacing-select" class="setting-control">
            <option value="tight">Tight</option>
            <option value="normal" selected>Normal</option>
            <option value="relaxed">Relaxed</option>
          </select>
        </div>
      </div>
    </div>
  </main>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay hidden">
    <div class="loading-spinner"></div>
    <p id="loading-message">Loading...</p>
  </div>

  <!-- Error Modal -->
  <div id="error-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Error</h3>
      <p id="error-message"></p>
      <button class="btn btn-primary" onclick="document.getElementById('error-modal').classList.add('hidden')">OK</button>
    </div>
  </div>

  <script>
    // Immediate check for electronAPI
    console.log('[RENDERER] Scripts loading...');
    console.log('[RENDERER] window.electronAPI available:', typeof window.electronAPI !== 'undefined');
    
    // Check again after a short delay
    setTimeout(() => {
      console.log('[RENDERER] Delayed check - window.electronAPI available:', typeof window.electronAPI !== 'undefined');
      if (window.electronAPI) {
        console.log('[RENDERER] electronAPI methods:', Object.keys(window.electronAPI));
      }
    }, 500);
  </script>
  <script src="viewer/viewer.js"></script>
  <script>
    // Verify viewer loaded
    console.log('[RENDERER] After viewer.js - window.viewer:', typeof window.viewer !== 'undefined');
    if (window.viewer) {
      console.log('[RENDERER] window.viewer.init:', typeof window.viewer.init);
    } else {
      console.error('[RENDERER] CRITICAL: window.viewer not found after loading viewer.js!');
    }
  </script>
  <script src="export/wizard.js"></script>
  <script src="settings/settings.js"></script>
  <script src="app.js"></script>
</body>
</html>

